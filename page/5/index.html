<!DOCTYPE html>
<html lang=en>
<head>
	<!-- hexo-inject:begin --><!-- hexo-inject:end --><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css">   
    <meta charset="utf-8">
    
    <title>Tankcat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    

    

    
        <link rel="shortcut icon" href="/css/images/favicon.ico" />
    
	
    <link rel="stylesheet" href="/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/vendor/open-sans/styles.css">
    <link rel="stylesheet" href="/vendor/source-code-pro/styles.css">
	<link rel="stylesheet" href="/css/comment.css">
    <link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/tagclouds.css">
	<link rel="stylesheet" href="/css/font-awesome.css">
    <script src="/vendor/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/vendor/lightgallery/css/lightgallery.min.css">
    
    
    
    
    


	<script src="//cdn.bootcss.com/jquery/2.1.0/jquery.min.js" type="text/javascript"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="containerr">
        
    <header id="header" style="padding-top:15px">
    <div id="header-main" class="header-inner">
			
			 <div class="outer">

				<a href="/" id="logo">
					<i class="logo"></i>
	
				</a>
				<nav id="main-nav">
					
						<a class="main-nav-link" href="/index.html">Home</a>
					
						<a class="main-nav-link" href="/archives">Archive</a>
					
						<a class="main-nav-link" href="/categories">Category</a>
					
						<a class="main-nav-link" href="/tags">Tag</a>
					
						<a class="main-nav-link" href="/about">About</a>
					
						<a class="main-nav-link" href="/favorite">Photos</a>
					
				</nav>
			</div> 
	</div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/index.html">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archive</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Category</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tag</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                    <td><a class="main-nav-link" href="/favorite">Photos</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>




			
        <div class="outer">
			<aside id="profile">
					<div class="profile-inner">
					</div>
			</aside>
			
					<section id="main">
    <article id="post-jielun" class="article article-type-post" itemscope itemprop="blogPost">
    
	<div class="article-inner" style="border-radius:1.5px; box-shadow: 10px 10px 5px #ccc;">
        
            
	
		<a href="/2016/10/23/jielun/" itemprop="url">
            <img src="http://7xwggp.com1.z0.glb.clouddn.com/IMG_20161022_194019R.jpg" class="article-banner" />
        </a>
	



        
        
            <header class="article-header">
				
					<center>
    
        <h1 itemprop="name">
            <a class="article-title" href="/2016/10/23/jielun/">é‡è§å°å…¬ä¸¾</a>
        </h1>
    

					 
						<div class="article-meta">
							
    <div class="article-date">    
        <a href="/2016/10/23/jielun/">
            <time datetime="2016-10-23T13:21:31.000Z" itemprop="datePublished">2016-10-23</time>
        </a>
    </div>

							<!--
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Jottings/">Jottings</a>
		&nbsp;&nbsp;
		
			<span class="article-tag">
				<i class="fa fa-tag"></i>
				<a class="tag-link" href="/tags/å‘¨æ°ä¼¦/">å‘¨æ°ä¼¦</a>
			</span>
		
    </div>
-->
							<!--
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/å‘¨æ°ä¼¦/">å‘¨æ°ä¼¦</a>
    </div>
-->
						</div>
					
					
					
					</center>
				
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            <p><p>å‘¨æ°ä¼¦æ˜¯èº«è¾¹å¾ˆå¤šåŒé¾„äººçš„å¶åƒï¼Œä»–ä»¬åº”è¯¥ä»å°å­¦æˆ–è€…åˆä¸­çš„æ—¶å€™å°±å¼€å§‹è¿½ä»–ã€‚åŒæ—¶æœŸçš„è¿˜æœ‰è”¡ä¾æ—ã€å¼ éŸ¶æ¶µã€æ—ä¿Šæ°é‚£äº›äººï¼Œå¾ˆå¥‡æ€ªå½“æ—¶æˆ‘é¡¶å¤šæ˜¯å¯¹ä»–ä»¬çš„å‡ é¦–æ­Œæ„Ÿå…´è¶£ï¼Œæ¯”å¦‚æ¬§è‹¥æ‹‰ï¼Œæ›¹æ“ï¼Œå¹¶æ²¡æœ‰èŒç”Ÿè¿½æ˜Ÿçš„æ¦‚å¿µã€‚</p>
<p>æˆ‘è®°ä¸å¾—å¬å‘¨æ°ä¼¦çš„ç¬¬ä¸€é¦–æ­Œæ˜¯ä»€ä¹ˆã€‚å°å­¦å…­å¹´çº§çš„æ—¶å€™æˆ‘å¦ˆåŒäº‹çš„å¥³å„¿ä¹°äº†ä¸€ä¸ªMP3,éœ€è¦åˆ†å¤–å®‰ç”µæ± çš„é‚£ç§ï¼Œé‡Œé¢æœ‰ä¸¤é¦–æ°ä¼¦çš„æ­Œï¼Œä¸€é¦–å‘å¦‚é›ªï¼Œä¸€é¦–å¤œæ›²ã€‚æˆ‘å€Ÿè¿‡æ¥å¬ï¼Œå¾ˆå–œæ¬¢è¿™ä¸¤é¦–æ­Œçš„æ—‹å¾‹ï¼Œåæ¥æœåˆ°äº†æ­Œè¯ï¼Œå°±ç»å¸¸ä¹°èŠ±èŠ±ç»¿ç»¿çš„æœ¬å­æŠ„å†™æ­Œè¯ã€‚åˆ°äº†åˆä¸­ï¼Œå¾ˆå¤šæˆ‘å¾ˆä¸å–œæ¬¢çš„ç”·ç”Ÿç–¯ç‹‚åœ°è¿·æ‹å‘¨æ°ä¼¦ï¼Œå¯èƒ½å› ä¸ºå¥³å­©å­æˆç†Ÿå¾—æ—©ï¼Œç‰¹åˆ«åæ„Ÿä»–ä»¬è‡ªä»¥ä¸ºå¸…æ°”çš„éä¸»æµé£æ ¼ï¼ˆè¿˜æœ‰ä¸€ä¸ªåŸå› æ˜¯å¾ˆå¤šå–œæ¬¢å‘¨æ°ä¼¦çš„äººåŒæ—¶å–œæ¬¢ç€è®¸åµ©ï¼‰ã€‚æœ¬æ¥å› ä¸ºæ°ä¼¦ä¸æ¸…æ¥šçš„å‘éŸ³ï¼Œæˆ‘å¯¹ä»–æ˜¯æ— æ„Ÿçš„ï¼Œä½†æ˜¯å› ä¸ºä¸€äº›çƒ¦äººçš„ç²‰ä¸ï¼Œå¯¹æ­Œæ‰‹æœ¬äººä¹Ÿæ²¡ä»€ä¹ˆå¥½æ„Ÿã€‚åæ¥åˆ°äº†å¤§å­¦ï¼ŒæŸä¸ªé€—æ¯”å®¤å‹å¯¹æ­¤å’Œæˆ‘æƒŠäººçš„ç›¸ä¼¼ã€‚åˆä¸­çš„æ—¶å€™æˆ‘å¯èƒ½æ›´å¤šçš„æ˜¯åœ¨è¿½æ—¥æ¼«ï¼Œå–œæ¬¢ä¸»é¢˜æ›²ï¼Œè¿˜è®°å¾—åˆäºŒå®¶é‡Œä¹°ç”µè„‘ä¹‹å‰ï¼Œæ˜Ÿç©ºå«è§†æ¯å¤©æ™šä¸Š6ç‚¹æ”¾çŠ¬å¤œå‰ï¼Œæˆ‘å°±æ‹¿ç€å¤è¯»æœºå½•é‚£é¦–change the worldã€‚</p>
<p>åˆ°äº†é«˜ä¸€ï¼Œå­¦æ ¡æ˜¯æ˜ä»¤ç¦æ­¢ä½¿ç”¨ç”µå­äº§å“çš„ï¼Œæˆ‘ç”¨å……é¥­å¡çš„é’±å·å·ä¹°äº†ä¸€ä¸ªmp3,åˆ—äº†ä¸€ä¸ªæ­Œå•è®©å‰æ¡Œçš„ç”·ç”Ÿå›å®¶å¸®æˆ‘ä¸‹ç‚¹æ­Œï¼Œå“ªçŸ¥é“ä»–å…¨ç»™æˆ‘ä¸‹çš„å‘¨æ°ä¼¦ã€‚å¾ˆå¹¸è¿çš„æ˜¯ï¼Œä»–ç»™æˆ‘ä¸‹çš„éƒ½æ˜¯ä¸€äº›æ…¢èŠ‚å¥æƒ…æ­Œï¼Œæœ€é•¿çš„ç”µå½±ï¼Œç»™æˆ‘ä¸€é¦–æ­Œçš„æ—¶é—´ï¼Œç”œç”œçš„ï¼Œè¯´å¥½çš„å¹¸ç¦å‘¢ï¼Œå½©è™¹ï¼Œä¸ƒé‡Œé¦™ä¹‹ç±»çš„ã€‚ä½†ä¹Ÿæ²¡æœ‰å› ä¸ºè¿™äº›æ­Œè€Œç²‰ä¸Šæ°ä¼¦ï¼Œè¿˜æ˜¯å¬æ­Œä¸çœ‹äººçš„çŠ¶æ€ã€‚</p>
<p>åæ¥çš„åæ¥ï¼Œæ°ä¼¦å½“äº†å¥½å£°éŸ³çš„å¯¼å¸ˆï¼Œçœ‹äº†ä¸€ä¸¤æœŸï¼Œå‘ç°ä»–å…¶å®å¾ˆä¸ªå¾ˆå¯çˆ±çš„äººã€‚å†åˆ°ç°åœ¨ï¼Œä»–çš„æ–°ä¸“è¾‘åºŠè¾¹æ•…äº‹ï¼Œé‚£é¦–å‰ä¸–æƒ…äººï¼Œå‘Šç™½æ°”çƒå’Œnow you see meï¼Œè®©æˆ‘æ„Ÿè§‰ï¼Œè¿™å°±æ˜¯ä»å‰é‚£ä¸ªé…·é…·çš„æ°ä¼¦å‘€ï¼Œé‚£ç§æˆ‘ä»¥å‰ä¸å±‘çš„é£æ ¼åŸæ¥è¿™ä¹ˆå¥‡å¦™ã€‚äºæ˜¯ä¸€ç‚¹æ²¡çŠ¹è±«åœ°åœ¨ç½‘æ˜“äº‘ä¸Šä¹°äº†æ•°å­—ä¸“è¾‘ã€‚<br>ä»Šå¤©å¤§è€è¿œä»ä¸Šæµ·è·‘åˆ°åˆè‚¥å¬å‘¨æ°ä¼¦çš„æ¼”å”±ä¼šï¼Œè™½ç„¶ä½å­å¾ˆä¸å¥½ï¼Œçœ‹ä¸åˆ°äººä¹Ÿç®—äº†ï¼Œå±å¹•ä¹Ÿçœ‹ä¸åˆ°ï¼›è™½ç„¶å®¤å¤–çš„éŸ³å“æ•ˆæœä¹Ÿæœ‰ç‚¹è®©äººå¤±æœ›ï¼Œé‚£äº›å¿«æ­ŒåŸºæœ¬å¬ä¸æ¸…æ­Œè¯ï¼›è™½ç„¶æ’é˜Ÿå¾ˆé•¿ï¼Œåº§ä½åå¾—å¾ˆä¹±â€¦ä½†æ˜¯é‚£äº›æˆ‘è‡ªå·±å¾ˆç†Ÿæ‚‰çš„æ—‹å¾‹å“èµ·çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„ä¸¾åŠ¨åªå‰©ä¸‹èˆåŠ¨è§å…‰æ£’ï¼Œè·Ÿç€ä¸€èµ·å”±ã€‚<br>è®©æˆ‘å°è±¡å¾ˆæœ€æ·±åˆ»çš„æ˜¯ç‚¹æ­Œç¯èŠ‚ï¼Œç‚¹åˆ°çš„ç¬¬ä¸‰ä¸ªå¥³å­©å­ï¼Œæ°ä¼¦é—®å¥¹æ˜¯å’Œè°ä¸€èµ·æ¥çš„ï¼Œå¥¹è¯´å¥¹ä¸€ä¸ªäººæ¥çš„ã€‚å½“æ—¶æ°ä¼¦æ„£äº†ä¸€ä¸‹ï¼Œç„¶åå®‰æ…°å¥¹è¯´ï¼Œå…¨åœºçš„è§‚ä¼—éƒ½æ˜¯å¥¹çš„æœ‹å‹ï¼Œéƒ½é™ªç€å¥¹å¬å”±æ­Œã€‚å½“æ—¶æˆ‘ç‰¹åˆ«æƒ³å»æ‹¥æŠ±é‚£ä¸ªå¥³ç”Ÿã€‚ä¸€ä¸ªäººå»çœ‹æ¼”å”±ä¼šï¼Œèº«è¾¹éƒ½æ˜¯æƒ…ä¾£æˆ–è€…é—ºèœœå›¢ã€‚ä½ çš„æ³¨æ„åŠ›æœ¬è¯¥åªæ”¾åœ¨çˆ±è±†èº«ä¸Šï¼Œå¯æ— æ³•é¿å…çš„ï¼Œæœ‰äº›åœºæ™¯ï¼Œæœ‰äº›æ­Œè¯å°±æ˜¯ä¼šè§¦åŠ¨ä½ å†…å¿ƒé‚£å—æœ€æŸ”è½¯çš„åœ°æ–¹ã€‚è¿™ç§ç»å†æˆ‘ä½“éªŒè¿‡ã€‚<br>é”™è¿‡äº†å¯ä»¥æœ‰å¤šä¸€ç‚¹æ°ä¼¦çš„å¹´å°‘æ—¶å…‰æœ‰äº›é—æ†¾ï¼Œä½†ä¹Ÿå¾ˆå¹¸è¿ï¼Œæˆ‘å¼€å§‹è·¯è½¬ç²‰äº†ï¼Œæœªæ¥çš„è·¯ï¼Œè¿˜å¯ä»¥ç›¸ä¼´è€Œè¡Œã€‚ğŸ’—ğŸ’—ğŸ’—</p>
<p>ps:å½“ç„¶å•¦ï¼Œå¦‚æœèƒ½é‡è§ä¸€ä¸ªå–œæ¬¢äººçš„ä¸€èµ·å»è‹æ‰“ç»¿çš„after summerï¼Œé‚£ä¹ˆä¼šæ›´åŠ å¹¸è¿~~~<br></p>
            <p class="article-more-link">
               <a href="/2016/10/23/jielun/#more">Read More</a>
				
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/å‘¨æ°ä¼¦/">å‘¨æ°ä¼¦</a>
    </div>

            </p>
        
        </div>
		
    </div>
    
</article>





    <article id="post-sodagreen" class="article article-type-post" itemscope itemprop="blogPost">
    
	<div class="article-inner" style="border-radius:1.5px; box-shadow: 10px 10px 5px #ccc;">
        
            
	
		<a href="/2016/10/17/sodagreen/" itemprop="url">
            <img src="http://7xwggp.com1.z0.glb.clouddn.com/sodagreen.jpg" class="article-banner" />
        </a>
	



        
        
            <header class="article-header">
				
					<center>
    
        <h1 itemprop="name">
            <a class="article-title" href="/2016/10/17/sodagreen/">My Favorite Band</a>
        </h1>
    

					 
						<div class="article-meta">
							
    <div class="article-date">    
        <a href="/2016/10/17/sodagreen/">
            <time datetime="2016-10-17T12:02:31.000Z" itemprop="datePublished">2016-10-17</time>
        </a>
    </div>

							<!--
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Jottings/">Jottings</a>
		&nbsp;&nbsp;
		
			<span class="article-tag">
				<i class="fa fa-tag"></i>
				<a class="tag-link" href="/tags/è‹æ‰“ç»¿/">è‹æ‰“ç»¿</a>
			</span>
		
    </div>
-->
							<!--
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/è‹æ‰“ç»¿/">è‹æ‰“ç»¿</a>
    </div>
-->
						</div>
					
					
					
					</center>
				
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            <p><p>Sodagreen is a Taiwanese indie band formed in 2001. Its member has been unchanged since 2003: lead vocals Wu Tsing-Fong, guitarist Liu Jia-Kai, guitarist Ho Jing-Yang, keyboardist Kung Yu-Chi, bass guitarist Hsieh Shin-Yi and drummer Shih Jun-Wei. The band was originally named by Shih and Wu affixed his favorite color, green, to the name. </p>
<p>Pure, artistic, indie, free, soft and simple. All of these are my impression of Sodagreen. The band is well known for its lead vocalist and songwriter Wu Tsing-Fong, who is excellent for his poetic lyrics, unique performing style and wide vocal range. As a typical Virgo, he is a paranoia that is disproportionate to an idol. He never does what an idol should do. He is unwilling to please the fans and doesnâ€™t like to participate in the announcement program. To be a qualified artist is very hard; to be an artist who can satisfy all the fans is harder. I still remember the live show in Spring Wave Music And Art Festival this year. Sodagreen was arranged to the final appearance and didnâ€™t finish all the songs in that the organizer advanced the end of the show and turned off the microphone domineeringly. Wu reluctantly left in the dark, but insisted on singing the rest of the songs through Weibo.</p>
<p>One of my favorite albums is â€œSummer/Feverâ€. Whenever I feel sad, I will listen to this album, which has inspiring power. It was released on September 11, 2009 and is their fifth full-length studio album. It is the second of the bandâ€™s Vivaldi Project, a planned series of four albums representing the four seasons respectively. The recording of this album took place in London and the songs were mostly written by the lead vocalist Wu. The album contains Britpop elements and lyrical references to the supernatural, Faust, Madame Butterfly, Don Quixote and the Greek god Dionysus. Among the songs of this album, I like â€œThe Sound That Remainsâ€ best. In the lyrics, it draws an analogy between the sound of cicadas and the flood of public opinion, which narrows our horizon. I think the metaphor of the song is what Sodagreen has being teaching us: Donâ€™t always mind about what other people think of you and just be free to pursue the self-value realization.</p>
<p>The Sodagreenâ€™s last round of road show â€œAfter Summerâ€ before their temporarily overturn has launched. I wish I could grab a ticket for the live show in Shanghai!<br></p>
            <p class="article-more-link">
               <a href="/2016/10/17/sodagreen/#more">Read More</a>
				
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/è‹æ‰“ç»¿/">è‹æ‰“ç»¿</a>
    </div>

            </p>
        
        </div>
		
    </div>
    
</article>





    <article id="post-sssj" class="article article-type-post" itemscope itemprop="blogPost">
    
	<div class="article-inner" style="border-radius:1.5px; box-shadow: 10px 10px 5px #ccc;">
        
            
	
		<a href="/2016/08/23/sssj/" itemprop="url">
            <img src="http://7xwggp.com1.z0.glb.clouddn.com/005yXe3qgw1f4tv3vh6eyj30zk0grjtj.jpg" class="article-banner" />
        </a>
	



        
        
            <header class="article-header">
				
					<center>
    
        <h1 itemprop="name">
            <a class="article-title" href="/2016/08/23/sssj/">Streaming Similarity Self-Join</a>
        </h1>
    

					 
						<div class="article-meta">
							
    <div class="article-date">    
        <a href="/2016/08/23/sssj/">
            <time datetime="2016-08-23T05:45:31.000Z" itemprop="datePublished">2016-08-23</time>
        </a>
    </div>

							<!--
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Papers/">Papers</a>
		&nbsp;&nbsp;
		
			<span class="article-tag">
				<i class="fa fa-tag"></i>
				<a class="tag-link" href="/tags/Stream/">Stream</a>
			</span>
		
    </div>
-->
							<!--
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Stream/">Stream</a>
    </div>
-->
						</div>
					
					
					
					</center>
				
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            <p><p><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script></p>
<h1 id="Abstract-æ‘˜è¦"><a href="#Abstract-æ‘˜è¦" class="headerlink" title="Abstract æ‘˜è¦"></a>Abstract æ‘˜è¦</h1><p>åœ¨æ•°æ®æµç¯å¢ƒä¸‹ï¼Œç³»ç»Ÿå¤„ç†çš„æ•°æ®æ˜¯æºæºä¸æ–­æµè¿›çš„æ•°æ®é¡¹ã€‚æœ¬æ–‡ç ”ç©¶çš„é—®é¢˜æ˜¯ï¼Œæ•°æ®æµç›¸ä¼¼æ€§çš„è¿æ¥å¤„ç†(SSSJ)ï¼Œå³åœ¨æ•°æ®æµä¸­æ‰¾å‡ºæ‰€æœ‰çš„ä¸¤ä¸¤æ•°æ®é¡¹å¯¹ï¼Œå®ƒä»¬çš„ç›¸ä¼¼åº¦è¶…è¿‡ä¸€ä¸ªç»™å®šçš„é˜ˆå€¼ã€‚è§£å†³è¿™ä¸ªé—®é¢˜æœ€ç®€å•çš„æ„æƒ³æ˜¯èƒ½æ‹¥æœ‰æ— é™å¤§çš„å†…å­˜ç©ºé—´ï¼Œä½†ç›®å‰æ¥è®²ï¼Œè¿™æ˜¯ä¸èƒ½è·å¾—çš„ã€‚å› æ­¤ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ¬æ–‡æå‡ºäº†ä¸€ä¸ªæ¦‚å¿µï¼Œ<code>æ—¶é—´ä¾èµ–çš„ç›¸ä¼¼æ€§</code>ï¼Œä¸¤ä¸ªæ•°æ®é¡¹åˆ°è¾¾çš„æ—¶é—´é—´éš”è¶Šå¤§ï¼Œå®ƒä»¬çš„ç›¸ä¼¼åº¦è¶Šä½ã€‚<br>åœ¨æ­¤æ¦‚å¿µçš„åŸºç¡€ä¸Šï¼Œæœ¬æ–‡è®¾è®¡ä¸¤ç§ç®—æ³•æ¡†æ¶ï¼šâ‘  å¾®æ‰¹æ¬¡å¤„ç†(MiniBatch,ç®€ç§°MB)ï¼Œä½¿ç”¨ç›®å‰å·²æœ‰çš„åŸºäºç´¢å¼•çš„è¿‡æ»¤æŠ€æœ¯ï¼›â‘¡ æµå¤„ç†(Streaming,ç®€ç§°STR),åœ¨ç´¢å¼•çš„åŸºç¡€ä¸Šå¢åŠ æ—¶é—´è¿‡æ»¤ï¼Œå¹¶åœ¨ç®—æ³•ä¸­é›†æˆä¸€ç§æ–°çš„åŸºäºæ—¶é—´çš„è¾¹ç•Œå¤„ç†ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæœ¬æ–‡åŸºäºL2APçš„ç´¢å¼•è®¾è®¡ä¸€ç§æ–°çš„é€‚ç”¨äºæ•°æ®æµç¯å¢ƒçš„ç´¢å¼•ç®—æ³•ï¼Œå³L2ã€‚</p>
<h1 id="Introduction-ä»‹ç»"><a href="#Introduction-ä»‹ç»" class="headerlink" title="Introduction ä»‹ç»"></a>Introduction ä»‹ç»</h1><p>åœ¨æ•°æ®åº“å’Œæ•°æ®æŒ–æ˜é¢†åŸŸï¼Œç›¸å…³æ€§è‡ªè¿æ¥å¤„ç†è¢«å¹¿æ³›ç ”ç©¶ï¼Œå…¶åº”ç”¨åœºæ™¯è¾ƒä¸ºå¹¿æ³›ï¼ŒåŒ…æ‹¬å‰½çªƒæ£€æµ‹ã€æŸ¥è¯¢ä¼˜åŒ–ã€ååŒè¿‡æ»¤ã€é‡å¤ç½‘é¡µçš„æ£€æµ‹ä¸å»é™¤ç­‰ã€‚è‹¥ä½¿ç”¨æš´åŠ›è§£æ³•ï¼Œå…¶å¤æ‚åº¦æ˜¯\(O(n^2)\)ã€‚åœ¨ç°å®åº”ç”¨ä¸­ï¼Œæ•°æ®é¡¹å¸¸ä»¥é«˜ç»´ç¨€ç–å‘é‡çš„å½¢å¼å‘ˆç°ï¼Œé‚£ä¹ˆç›¸ä¼¼åº¦çš„è®¡ç®—å³ä¸ºä½™å¼¦ç›¸ä¼¼å€¼çš„è®¡ç®—ã€‚ä¸ºäº†æ–¹ä¾¿å¤„ç†ï¼Œå¯ä»¥å°†å‘é‡å½’ä¸€åŒ–ï¼Œåˆ™è¿›ä¸€æ­¥å°†é—®é¢˜è½¬æ¢ä¸ºä¸¤ä¸ªå‘é‡çš„ç‚¹ç§¯ã€‚ç›®å‰è§£å†³ç›¸ä¼¼åº¦è‡ªè¿æ¥çš„ç®—æ³•ä¸»è¦ä¾èµ–äºåŸºäºå€’æ’ç´¢å¼•çš„åˆ å‡æŠ€æœ¯ä»¥åŠä¸€äº›æ•°å€¼ç•Œé™ã€‚<br>è®¡ç®—ç›¸ä¼¼åº¦è‡ªè¿æ¥ï¼Œä¸ä»…é€‚ç”¨äºé™æ€çš„æ•°æ®é›†ï¼Œåœ¨æ•°æ®æµé¢†åŸŸä¹ŸåŒæ ·é€‚ç”¨ã€‚è¿™é‡Œä¸¾ä¾‹ä¸¤ä¸ªç°å®åº”ç”¨ï¼Œåœ¨æ•°æ®æµç¯å¢ƒä¸‹è¿›è¡Œç›¸ä¼¼åº¦è‡ªè¿æ¥å¤„ç†ã€‚</p>
<ul>
<li>è¶‹åŠ¿ç›‘æµ‹ã€‚ç¤¾äº¤å¹³å°ï¼Œè­¬å¦‚Twitterï¼Œè¶‹åŠ¿ç›‘æµ‹ç®—æ³•è¯†åˆ«é¢‘ç‡é™¡å¢çš„ä¸»é¢˜æ ‡ç­¾ã€‚æ›´ç»†ç²’åº¦çš„è¶‹åŠ¿ç›‘æµ‹ç®—æ³•ä¹Ÿä¼šè¯†åˆ«å¾®åšé›†åˆã€‚è¿™äº›é›†åˆä¸­çš„æ•°æ®é¡¹å‡ºç°çš„é¢‘ç‡å¢åŠ ï¼Œå¹¶ä¸”åŒæ—¶å‡ºç°æŸäº›ç›¸åŒçš„æ ‡ç­¾ã€‚å¯¹äºè¯¥è¶‹åŠ¿ç›‘æµ‹ç®—æ³•ï¼Œåœ¨æ•°æ®æµç¯å¢ƒä¸‹æ‰¾å‡ºç›¸ä¼¼çš„å¾®åšååˆ†é‡è¦ã€‚</li>
<li>è¿‘ä¼¼é‡å¤é¡¹è¿‡æ»¤ã€‚åŒæ ·ï¼Œåœ¨ç¤¾äº¤å¹³å°ï¼Œè­¬å¦‚Twitterï¼Œå½“æŸä¸ªäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œç”¨æˆ·ä»¬å¯èƒ½ä¼šæ¥æ”¶åˆ°ä¸è¯¥äº‹ä»¶ç›¸å…³çš„è¿‘ä¼¼é‡å¤çš„å¤šæ¡å¾®åšã€‚è¿™äº›å¾®åšé€šå¸¸è¿ç»­åœ°å‡ºç°ã€‚å› æ­¤ï¼Œå°†è¿™äº›è¿‘ä¼¼é‡å¤çš„å¾®åšè¿›è¡Œè¿‡æ»¤æˆ–è€…åˆ†ç»„æœ‰åˆ©äºæé«˜ç”¨æˆ·ä½“éªŒã€‚</li>
</ul>
<p>ä½†é—®é¢˜æ˜¯ï¼Œå…³äºæ•°æ®æµç¯å¢ƒä¸‹çš„ç›¸ä¼¼åº¦è‡ªè¿æ¥å¤„ç†çš„ç ”ç©¶å¹¶ä¸å¤šã€‚è¿™æ˜¯ç”±äºç¼ºä¹æ— é™å†…å­˜ï¼šä¸èƒ½å°†å…ˆåˆ°æ¥æ•°æ®é¡¹éšæ„åˆ é™¤ï¼Œå› ä¸ºè¯¥æ•°æ®é¡¹å¯èƒ½ä¸æœªæ¥åˆ°çš„æ•°æ®é¡¹ç›¸ä¼¼ã€‚<br>æœ¬æ–‡å¼•å…¥ä¸€ä¸ªæ—¶é—´å› å­æ¥è§£å†³å†…å­˜é—®é¢˜ã€‚æˆ‘ä»¬è®¾å®šï¼Œåªæœ‰åœ¨åˆ°è¾¾çš„æ—¶é—´é—´éš”åœ¨æŒ‡å®šèŒƒå›´å†…ï¼Œä¸¤ä¸ªæ•°æ®é¡¹æ‰æœ‰å¯èƒ½ç›¸ä¼¼ã€‚æˆ‘ä»¬å®šä¹‰æ—¶é—´ä¾èµ–çš„ç›¸ä¼¼æ€§ï¼šåŸºäºå†…å®¹çš„ç‚¹ç§¯ä¸æ—¶é—´å› å­çš„ä¹˜ç§¯ï¼Œè¯¥æ—¶é—´å› å­ä¼šéšç€æ—¶é—´é—´éš”çš„å¢åŠ å‘ˆç°æŒ‡æ•°çº§å‡å°ã€‚ç”±äºæ—¶é—´å› å­çš„å­˜åœ¨ï¼Œå½“æŸäº›æ•°æ®é¡¹çš„åˆ°è¾¾æ—¶é—´è¶…å‡ºä¸€å®šèŒƒå›´ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›æ•°æ®é¡¹åˆ é™¤ã€‚ä¸‹å›¾è¡¨è¾¾äº†è¿™ä¸ªideaã€‚<br>    <div align="center"><img src="http://7xwggp.com1.z0.glb.clouddn.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20160823155752.png" alt="æ—¶åºå›¾"> </div></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ ‡è®°æœ‰æ—¶é—´æˆ³çš„æ–‡æ¡£ä»¥æ•°æ®æµçš„å½¢å¼æºæºä¸æ–­åˆ°è¾¾ã€‚æ—¶é—´è½´ä¸Šæ–¹çš„æ–‡æ¡£åŒ…å«ç›¸ä¼¼çš„å†…å®¹ï¼Œæ ‡è®°ä¸ºçº¢è‰²ã€‚åœ¨æ‰€æœ‰ä¸¤ä¸¤ç›¸ä¼¼çš„æ–‡æ¡£å¯¹ä¸­ï¼Œæˆ‘ä»¬åªå…³å¿ƒåˆ°è¾¾æ—¶é—´ç›¸è¿‘çš„æ–‡æ¡£å¯¹ã€‚å› æ­¤ï¼Œå›¾ä¸­æ‰€æœ‰çš„4-é€‰-2çš„æ–‡æ¡£å¯¹é‡Œï¼Œåªæœ‰ä¸¤å¯¹æ–‡æ¡£è¢«é€‰ä¸­(ç”¨è“è‰²ç®­å¤´æ ‡è®°)ã€‚<br>ä¸å·²æœ‰çš„ç›¸ä¼¼æ€§è‡ªè¿æ¥å¤„ç†ç®—æ³•ç±»ä¼¼ï¼Œæœ¬æ–‡çš„ç®—æ³•ä¹Ÿä¾èµ–äºç´¢å¼•æŠ€æœ¯ã€‚å·²æœ‰çš„ç®—æ³•ä½¿ç”¨ä¸åŒç±»å‹çš„<code>ç´¢å¼•è¿‡æ»¤</code>ï¼Œä»¥å‡å°‘é€šè¿‡ç´¢å¼•è¿”å›çš„æ½œåœ¨é…å¯¹é¡¹æ•°é‡ã€‚æŒ‰ç…§è¿™ç§è¯­ä¹‰ï¼Œæˆ‘ä»¬å®šä¹‰<code>æ—¶é—´è¿‡æ»¤</code>æ¥ï¼Œä¸æ—¶é—´ä¾èµ–çš„ç›¸ä¼¼æ€§è¿›è¡Œå…³è”ï¼Œä»¥ä¾¿å°†æ—§çš„ç´¢å¼•é¡¹ä»ç´¢å¼•åˆ—è¡¨ä¸­åˆ é™¤ã€‚<br>æœ¬æ–‡æå‡ºäº†ä¸¤ç§ç®—æ³•æ¡†æ¶æ¥è§£å†³æ•°æ®æµçš„ç›¸ä¼¼æ€§è‡ªè¿æ¥å¤„ç†ï¼Œå‡ä¾èµ–äºæ—¶é—´è¿‡æ»¤ã€‚MBæ¡†æ¶ä½¿ç”¨ç°æˆçš„ç´¢å¼•æŠ€æœ¯ï¼Œåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä»¥æµæ°´çº¿çš„æ–¹å¼åˆ›å»ºä¸¤ä¸ªç´¢å¼•ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ä¸¢å¼ƒæ—§ç´¢å¼•ã€‚STRæ¡†æ¶å¯¹ç°æœ‰çš„ç´¢å¼•æŠ€æœ¯è¿›è¡Œè°ƒæ•´ï¼Œå°†æ—¶é—´è¿‡æ»¤çš„å› ç´ å†…åµŒåˆ°å…¶ä¸­ã€‚æ­¤å¤–ï¼Œæœ¬æ–‡ç»“åˆå·²æœ‰çš„ç´¢å¼•æŠ€æœ¯APå’ŒL2APï¼Œè®¾è®¡äº†ä¸€ç§å¯å¤„ç†æµå¼æ•°æ®çš„ç´¢å¼•ç®—æ³•L2,å®ƒå­˜åœ¨ä»¥ä¸‹å››ç‚¹ä¼˜åŠ¿ï¼š</p>
<ol>
<li>æœ‰æ•ˆå‡å°‘æ½œåœ¨ç›¸ä¼¼æ•°æ®é¡¹çš„é…å¯¹æ•°é‡ï¼›</li>
<li>ä¸éœ€è¦æ”¶é›†æ•°æ®æµçš„ç»Ÿè®¡ä¿¡æ¯ï¼›</li>
<li>ä½¿ç”¨è½»é‡çº§çš„ç´¢å¼•ç»´æŒï¼›</li>
<li>å½“æ•°æ®é¡¹å˜â€œæ—§â€æ—¶ï¼Œå¯ä»¥è¿…é€Ÿä¸¢å¼ƒã€‚</li>
</ol></p>
            <p class="article-more-link">
               <a href="/2016/08/23/sssj/#more">Read More</a>
				
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Stream/">Stream</a>
    </div>

            </p>
        
        </div>
		
    </div>
    
</article>





    <article id="post-lein" class="article article-type-post" itemscope itemprop="blogPost">
    
	<div class="article-inner" style="border-radius:1.5px; box-shadow: 10px 10px 5px #ccc;">
        
        
            <header class="article-header">
				
					<center>
    
        <h1 itemprop="name">
            <a class="article-title" href="/2016/07/18/lein/">Leiningenå®‰è£…</a>
        </h1>
    

					 
						<div class="article-meta">
							
    <div class="article-date">    
        <a href="/2016/07/18/lein/">
            <time datetime="2016-07-18T05:09:31.000Z" itemprop="datePublished">2016-07-18</time>
        </a>
    </div>

							<!--
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Techniques/">Techniques</a>
		&nbsp;&nbsp;
		
			<span class="article-tag">
				<i class="fa fa-tag"></i>
				<a class="tag-link" href="/tags/Leiningen/">Leiningen</a>
			</span>
		
    </div>
-->
							<!--
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Leiningen/">Leiningen</a>
    </div>
-->
						</div>
					
					
					
					</center>
				
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            <p><p>Leiningenä½œä¸ºClojureçš„é¡¹ç›®åˆ›å»ºå’Œç®¡ç†å·¥å…·ï¼Œåœ¨Ubuntuç³»ç»Ÿä¸‹çš„å®‰è£…è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<blockquote>
<ol>
<li>Make sure you have a Java JDK version 6 or later.</li>
<li>Download the lein script from the stable branch of this project.</li>
<li>Place it on your $PATH. (~/bin is a good choice if it is on your path.)</li>
<li>Set it to be executable. (chmod 755 ~/bin/lein)</li>
<li>Run it.</li>
</ol>
</blockquote>
<p>è¿™æ®µå®‰è£…æ•™ç¨‹æ˜¯æ‘˜å½•è‡ª<a href="https://github.com/technomancy/leiningen/blob/stable/README.md" target="_blank" rel="noopener">Leiningen</a>ï¼Œç¿»è¯‘å¦‚ä¸‹ï¼š</p>
<ol>
<li>å®‰è£…Java JDKï¼Œç¡®ä¿å…¶ç‰ˆæœ¬æ˜¯6.0ä»¥åŠ6.0ä¹‹åçš„ï¼›</li>
<li>ä¸‹è½½<a href="https://raw.githubusercontent.com/technomancy/leiningen/stable/bin/lein" target="_blank" rel="noopener">leinè„šæœ¬</a></li>
<li>åœ¨/binç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸º<code>lein</code>çš„æ–‡ä»¶ï¼Œå°†ä¸Šè¿°è„šæœ¬æ‹·è´è¿›å»å¹¶ä¿å­˜ï¼›</li>
<li><p>è¿è¡Œå‘½ä»¤ä»¥ä¸‹å‘½ä»¤ä½¿å¾—<code>lein</code>ä¸ºå¯æ‰§è¡Œæ–‡ä»¶:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ chmod 755 ~/bin/lein</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¿è¡Œ<code>lein</code>ï¼Œä¸‹è½½leiningen-xxx-standalone.jar(xxxä¸ºç‰ˆæœ¬)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ lein</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>ç”±äºç½‘ç»œè¿æ¥çš„é—®é¢˜ï¼Œä¸‹è½½è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°é”™è¯¯ï¼Œæ¯”å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">It&apos;s also possible that you&apos;re behind a firewall and haven&apos;t set HTTP_PROXY and HTTPS_PROXY.</span><br></pre></td></tr></table></figure></p>
<p>è§£å†³æ–¹æ¡ˆï¼šåˆ é™¤æ‰~/.leinç›®å½•åï¼Œæ‰§è¡Œ<code>export HTTP_CLIENT=&quot;wget --no-check-certificate -O&quot;</code>ï¼Œç„¶åé‡æ–°æ‰§è¡Œ<code>lein</code>å³å¯ã€‚</p></p>
            <p class="article-more-link">
               <a href="/2016/07/18/lein/#more">Read More</a>
				
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Leiningen/">Leiningen</a>
    </div>

            </p>
        
        </div>
		
    </div>
    
</article>





    <article id="post-storm component" class="article article-type-post" itemscope itemprop="blogPost">
    
	<div class="article-inner" style="border-radius:1.5px; box-shadow: 10px 10px 5px #ccc;">
        
            
	
		<a href="/2016/07/16/storm component/" itemprop="url">
            <img src="http://7xwggp.com1.z0.glb.clouddn.com/storm-flow.png" class="article-banner" />
        </a>
	



        
        
            <header class="article-header">
				
					<center>
    
        <h1 itemprop="name">
            <a class="article-title" href="/2016/07/16/storm component/">Stormç»„ä»¶å’Œæ‹“æ‰‘ç»“æ„</a>
        </h1>
    

					 
						<div class="article-meta">
							
    <div class="article-date">    
        <a href="/2016/07/16/storm component/">
            <time datetime="2016-07-16T02:06:31.000Z" itemprop="datePublished">2016-07-16</time>
        </a>
    </div>

							<!--
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Techniques/">Techniques</a>
		&nbsp;&nbsp;
		
			<span class="article-tag">
				<i class="fa fa-tag"></i>
				<a class="tag-link" href="/tags/Storm/">Storm</a>
			</span>
		
    </div>
-->
							<!--
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Storm/">Storm</a>
    </div>
-->
						</div>
					
					
					
					</center>
				
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            <p><h1 id="Stormç®€ä»‹"><a href="#Stormç®€ä»‹" class="headerlink" title="Stormç®€ä»‹"></a>Stormç®€ä»‹</h1><p>ã€€Stormæ˜¯Twitterå¼€æºçš„ä¸€ä¸ªç±»ä¼¼Hadoopçš„å®æ—¶æ•°æ®å¤„ç†æ¡†æ¶ï¼Œå®ƒåŸæ¥æ˜¯ç”±BackTypeå¼€å‘ï¼Œåè¢«Twitteræ”¶è´­ï¼Œå°†Stormä½œä¸ºTwitterçš„å®æ—¶æ•°æ®åˆ†æç³»ç»Ÿã€‚</p>
<h1 id="Stormæ€»ä½“ç»“æ„"><a href="#Stormæ€»ä½“ç»“æ„" class="headerlink" title="Stormæ€»ä½“ç»“æ„"></a>Stormæ€»ä½“ç»“æ„</h1><p>  Stormçš„æœ¯è¯­æ¯”è¾ƒå¤šï¼Œæœ¬æ–‡æ¶‰åŠçš„æœ‰Spoutï¼ŒBoltï¼ŒStreamï¼ŒTupleï¼ŒStream Groupingï¼ŒTopologyã€‚ä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹ã€‚</p>
<ul>
<li>Tupleï¼šåŒ…å«äº†ä¸€ä¸ªæˆ–è€…å¤šä¸ªé”®å€¼å¯¹çš„åˆ—è¡¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå…ƒç»„tupleä¸­çš„åŸŸå¯ä»¥æ˜¯æ•´å‹(integer)ç­‰åŸºæœ¬ç±»å‹å¯¹è±¡ã€‚ä¹Ÿå¯ä»¥é€šè¿‡å®šä¹‰å¯åºåˆ—åŒ–(<strong>å®ç°Serializableæ¥å£</strong>)çš„å¯¹è±¡æ¥å®ç°è‡ªå®šä¹‰çš„å…ƒç»„ç±»å‹ã€‚</li>
<li>Streamï¼šStormä¸­æœ€æ ¸å¿ƒçš„æ¦‚å¿µï¼Œåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹å¹¶è¡Œåˆ›å»ºã€å¤„ç†çš„å…ƒç¥–Tupleåºåˆ—ã€‚åœ¨å£°æ˜æ•°æ®æµçš„æ—¶å€™è¦ç»™å®šä¸€ä¸ªæœ‰æ•ˆçš„idï¼Œè‹¥ä¸æ˜¾ç¤ºæŒ‡å®šï¼Œåˆ™ç³»ç»Ÿé»˜è®¤ä¼šç»™æ•°æ®æµå®šä¹‰ä¸€ä¸ªåä¸ºâ€defaultâ€çš„idã€‚</li>
<li>Spoutï¼šæ¶ˆæ¯ç”Ÿäº§è€…ï¼Œæ˜¯æ•°æ®æµçš„æ•°æ®æ¥æºï¼Œå……å½“ä¸€ä¸ªé‡‡é›†å™¨çš„è§’è‰²ï¼Œè¿æ¥åˆ°å¤–éƒ¨çš„æ•°æ®æºï¼Œå¹¶å°†æ•°æ®è½¬åŒ–ä¸ºä¸€ä¸ªä¸ªtupleã€‚</li>
<li>Boltï¼šæ¶ˆæ¯å¤„ç†è€…ï¼Œå°è£…äº†æ•°æ®å¤„ç†é€»è¾‘ï¼Œå°†ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ•°æ®æµä½œä¸ºè¾“å…¥ï¼Œå¯¹æ•°æ®å®æ–½è¿ç®—åï¼Œé€‰æ‹©æ€§åœ°è¾“å‡ºä¸€ä¸ªæˆ–è€…å¤šä¸ªæ•°æ®æµã€‚å‡ ç§å…¸å‹çš„åŠŸèƒ½æœ‰æ•°æ®è¿‡æ»¤ã€è¿æ¥ã€èšåˆå’Œæ•°æ®åº“è¯»å†™ç­‰ã€‚</li>
<li>Stream Groupingï¼šå®šä¹‰äº†æ¶ˆæ¯åˆ†å‘ç­–ç•¥ï¼Œå³å®šä¹‰äº†ä¸€ä¸ªæ•°æ®æµä¸­çš„tupleå¦‚ä½•åˆ†å‘ç»™topologyä¸­çš„ä¸åŒboltçš„ä»»åŠ¡å®ä¾‹ã€‚</li>
<li>Topologyï¼šç”¨äºå°è£…ä¸€ä¸ªå®æ—¶è®¡ç®—åº”ç”¨ç¨‹åºçš„é€»è¾‘ï¼Œç±»ä¼¼äºHadoopä¸­çš„Jobã€‚ç”±Stream Groupingè¿æ¥èµ·æ¥çš„Spoutå’ŒBoltçš„æœ‰å‘æ— ç¯å›¾ï¼Œå¤„ç†çš„æ˜¯æºæºä¸æ–­çš„æ¶ˆæ¯æµã€‚</li>
</ul>
<h1 id="Stormç¼–ç¨‹åŸºç¡€"><a href="#Stormç¼–ç¨‹åŸºç¡€" class="headerlink" title="Stormç¼–ç¨‹åŸºç¡€"></a>Stormç¼–ç¨‹åŸºç¡€</h1><p>  Stormçš„æºç å…±åˆ†ä¸ºä¸‰å±‚ï¼Œåˆ†ä¸ºå¦‚ä¸‹ï¼š</p>
<ol>
<li>Stormæœ€ä¸Šå±‚çš„æ‰€æœ‰æ¥å£å‡æ˜¯ç”¨Javaå®šä¹‰çš„ã€‚</li>
<li>ä¸Šå±‚ç»å¤§å¤šæ•°æ¥å£çš„é€»è¾‘æ˜¯ç”¨Clojureå®ç°çš„ã€‚</li>
<li>æœ€åº•å±‚çš„æ•°æ®ç»“æ„æ˜¯ç”¨Thriftå®šä¹‰çš„ã€‚Thriftæ˜¯Apacheä¸‹é¢çš„è·¨è¯­è¨€æ¡†æ¶ï¼Œå®ƒå¯ä»¥åŸºäºThriftå®šä¹‰æ–‡ä»¶äº§ç”Ÿä¸åŒè¯­è¨€çš„ä»£ç ï¼Œæœ‰å…³è¯¦ç»†å†…å®¹å¯ä»¥å‚è€ƒ<a href="http://thrift.apache.org/" target="_blank" rel="noopener">thrift</a>ã€‚</li>
</ol>
<p>æœ¬æ–‡ä¸»è¦å°±ä¸Šå±‚Javaæ¥å£ä»‹ç»Stormçš„æ‹“æ‰‘å’Œç»„ä»¶ç»“æ„ã€‚</p>
<h2 id="æ‹“æ‰‘Topology"><a href="#æ‹“æ‰‘Topology" class="headerlink" title="æ‹“æ‰‘Topology"></a>æ‹“æ‰‘Topology</h2><p>  é¦–å…ˆï¼Œä»æœ€å¤–å±‚å¼€å§‹ï¼Œä¸¾ä¸€ä¸ªå¦‚ä½•åˆ›å»ºtopologyçš„ä¾‹å­ã€‚ä»£ç ä¸­çš„å¯¹è±¡ä¸‹é¢ä¼šä¸€ä¸€ä»‹ç»ã€‚<span id="builder"><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">TopologyBuilder builder = <span class="keyword">new</span> TopologyBuilder();</span><br><span class="line">builder.setSpout(<span class="string">"spout1"</span>, <span class="keyword">new</span> Spout1(), <span class="number">1</span>);</span><br><span class="line">builder.setSpout(<span class="string">"spout2"</span>, <span class="keyword">new</span> Spout2(), <span class="number">5</span>);</span><br><span class="line">builder.setBolt(<span class="string">"bolt"</span>, <span class="keyword">new</span> Bolt1(), <span class="number">3</span>)</span><br><span class="line">        .directGrouping(<span class="string">"spout1"</span>, <span class="string">"stream1"</span>)</span><br><span class="line">        .shuffleGrouping(<span class="string">"spout2"</span>);</span><br><span class="line">Config conf = <span class="keyword">new</span> Config();</span><br><span class="line">conf.setDebug(<span class="keyword">true</span>);</span><br><span class="line">StormSubmitter.submitTopology(<span class="string">"my-topology"</span>, conf, builder.createTopology());</span><br></pre></td></tr></table></figure></span></p>
<p></p>
<h3 id="TopologyBuilder"><a href="#TopologyBuilder" class="headerlink" title="TopologyBuilder"></a>TopologyBuilder</h3><p>ç¬¬ä¸€è¡Œä»£ç å®šä¹‰äº†ä¸€ä¸ªTopologyBuilderå¯¹è±¡ã€‚TopologyBuilderæ˜¯ä¸€ä¸ªå·¥å…·ç±»ï¼Œç”¨äºæ„é€ topologyã€‚Topologyæœ€åº•å±‚å®é™…ä¸Šæ˜¯Thriftçš„ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œåˆ†ä¸ºä¸€ä¸‹2ä¸ªéƒ¨åˆ†ï¼š</p>
<ol>
<li><p>StormTopology<br>å®šä¹‰äº†Topologyçš„ç»„æˆï¼ŒåŒ…æ‹¬Spoutå’ŒBoltï¼Œæ¯ä¸ªSpoutæˆ–è€…Boltéƒ½æœ‰å…¨å±€å”¯ä¸€çš„idã€‚ç›®å‰ä¸ºæ­¢ï¼ŒStateSpoutSpecè¿˜æ²¡æœ‰åœ¨è®¾è®¡ä»£ç ä¸­ç”¨åˆ°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">struct StormTopology&#123;</span><br><span class="line">    1: required map&lt;string, SpoutSpec&gt; spouts;</span><br><span class="line">    2: required map&lt;string, Bolt&gt; bolts;</span><br><span class="line">    3: required map&lt;string, StateSpoutSpec&gt; state_spouts;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>TopologySummary<br>å®šä¹‰äº†ç”¨æˆ·æäº¤çš„Topologyçš„åŸºæœ¬æƒ…å†µï¼Œä¾‹å¦‚è¯¥topologyåˆ†å¸ƒåœ¨å‡ ä¸ªå·¥ä½œè¿›ç¨‹ä¸Šï¼Œä½¿ç”¨äº†å¤šå°‘ä¸ªçº¿ç¨‹ï¼Œæœ‰å¤šå°‘ä¸ªä»»åŠ¡å®ä¾‹ã€‚è¿™äº›æ•°æ®ä¸»è¦ä¾›Nimbusä½¿ç”¨ï¼Œä»¥è¿”å›UIè¯·æ±‚çš„æ•°æ®ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">struct TopologySummary&#123;</span><br><span class="line">    1: required string id;</span><br><span class="line">    2: required string name;</span><br><span class="line">    3: required i32 num_tasks;</span><br><span class="line">    4: required i32 num_executors;</span><br><span class="line">    5: required i32 num_workers;</span><br><span class="line">    6: required i32 uptime_secs;</span><br><span class="line">    7: required string status;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>ç”±äºTopologyåœ¨Thriftä¸­è¿‡äºæè¿°åŒ–çš„ç‰¹æ€§ä¸ä¾¿äºç›´æ¥ä½¿ç”¨ï¼Œæ‰€ä»¥TopologyBuilderè¿›è¡Œäº†ä¸Šå±‚çš„å°è£…ï¼Œæä¾›äº†æ›´åŠ æ–¹ä¾¿çš„æ„å»ºæ–¹æ³•<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TopologyBuilder</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, IRichBolt&gt; _bolts = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, IRichSpout&gt; _spouts = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, ComponentCommon&gt; _commons = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, StateSpoutSpec&gt; _stateSpouts = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    ... </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> StormTopology <span class="title">createTopology</span><span class="params">()</span> </span>&#123;</span><br><span class="line">         Map&lt;String, Bolt&gt; boltSpecs = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">         Map&lt;String, SpoutSpec&gt; spoutSpecs = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">         maybeAddCheckpointSpout();</span><br><span class="line">         <span class="keyword">for</span>(String boltId: _bolts.keySet()) &#123;</span><br><span class="line">             IRichBolt bolt = _bolts.get(boltId);</span><br><span class="line">             bolt = maybeAddCheckpointTupleForwarder(bolt);</span><br><span class="line">             ComponentCommon common = getComponentCommon(boltId, bolt);</span><br><span class="line">             boltSpecs.put(boltId, <span class="keyword">new</span> Bolt(ComponentObject.serialized_java(Utils.javaSerialize(bolt)), common));   </span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">for</span>(String spoutId: _spouts.keySet()) &#123;</span><br><span class="line">             IRichSpout spout = _spouts.get(spoutId);</span><br><span class="line">             ComponentCommon common = getComponentCommon(spoutId, spout);</span><br><span class="line">             spoutSpecs.put(spoutId, <span class="keyword">new</span> SpoutSpec(ComponentObject.serialized_java(Utils.javaSerialize(spout)), common));</span><br><span class="line">         &#125;</span><br><span class="line">    </span><br><span class="line">         StormTopology stormTopology = <span class="keyword">new</span> StormTopology(spoutSpecs, boltSpecs,<span class="keyword">new</span> HashMap&lt;String, StateSpoutSpec&gt;());</span><br><span class="line">         stormTopology.set_worker_hooks(_workerHooks);</span><br><span class="line">         <span class="keyword">return</span> stormTopology;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> BoltDeclarer <span class="title">setBolt</span><span class="params">(String id, IRichBolt bolt, Number parallelism_hint)</span></span>&#123;</span><br><span class="line">         validateUnusedId(id);</span><br><span class="line">         initCommon(id, bolt, parallelism_hint);</span><br><span class="line">         _bolts.put(id, bolt);</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">new</span> BoltGetter(id);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> BoltDeclarer <span class="title">setBolt</span><span class="params">(String id, IRichBolt bolt)</span></span>&#123;</span><br><span class="line">         <span class="keyword">return</span> setBolt(id, bolt, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> BoltDeclarer <span class="title">setBolt</span><span class="params">(String id, IBasicBolt bolt)</span></span>&#123;</span><br><span class="line">         <span class="keyword">return</span> setBolt(id, bolt, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> BoltDeclarer <span class="title">setBolt</span><span class="params">(String id, IBasicBolt bolt, Number parallelism_hint)</span> </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> setBolt(id, <span class="keyword">new</span> BasicBoltExecutor(bolt), parallelism_hint);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> SpoutDeclarer <span class="title">setSpout</span><span class="params">(String id, IRichSpout spout, Number parallelism_hint)</span> </span>&#123;</span><br><span class="line">         validateUnusedId(id);</span><br><span class="line">         initCommon(id, spout, parallelism_hint);</span><br><span class="line">         _spouts.put(id, spout);</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">new</span> SpoutGetter(id);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> SpoutDeclarer <span class="title">setSpout</span><span class="params">(String id, IRichSpout spout)</span></span>&#123;</span><br><span class="line">         <span class="keyword">return</span> setSpout(id, spout, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">validateUnusedId</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line">         <span class="keyword">if</span>(_bolts.containsKey(id)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Bolt has already been declared for id "</span> + id);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">if</span>(_spouts.containsKey(id)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Spout has already been declared for id "</span> + id);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">if</span>(_stateSpouts.containsKey(id)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"State spout has already been declared for id "</span> + id);</span><br><span class="line">         &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">     <span class="function"><span class="keyword">private</span> ComponentCommon <span class="title">getComponentCommon</span><span class="params">(String id, IComponent component)</span> </span>&#123;</span><br><span class="line">          ComponentCommon ret = <span class="keyword">new</span> ComponentCommon(_commons.get(id));</span><br><span class="line">          OutputFieldsGetter getter = <span class="keyword">new</span> OutputFieldsGetter();</span><br><span class="line">          component.declareOutputFields(getter);</span><br><span class="line">          ret.set_streams(getter.getFieldsDeclaration());</span><br><span class="line">          <span class="keyword">return</span> ret;</span><br><span class="line">     &#125;</span><br><span class="line">    </span><br><span class="line">     <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initCommon</span><span class="params">(String id, IComponent component, Number parallelism)</span> <span class="keyword">throws</span> IllegalArgumentException </span>&#123;</span><br><span class="line">          ComponentCommon common = <span class="keyword">new</span> ComponentCommon();</span><br><span class="line">          common.set_inputs(<span class="keyword">new</span> HashMap&lt;GlobalStreamId, Grouping&gt;());</span><br><span class="line">          <span class="keyword">if</span>(parallelism!=<span class="keyword">null</span>) &#123;</span><br><span class="line">              <span class="keyword">int</span> dop = parallelism.intValue();</span><br><span class="line">              <span class="keyword">if</span>(dop &lt; <span class="number">1</span>) &#123;</span><br><span class="line">                 <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Parallelism must be positive."</span>);</span><br><span class="line">              &#125;</span><br><span class="line">              common.set_parallelism_hint(dop);</span><br><span class="line">          &#125;</span><br><span class="line">          Map conf = component.getComponentConfiguration();</span><br><span class="line">          <span class="keyword">if</span>(conf!=<span class="keyword">null</span>) common.set_json_conf(JSONValue.toJSONString(conf));</span><br><span class="line">          _commons.put(id, common);</span><br><span class="line">     &#125;</span><br><span class="line">     </span><br><span class="line">     ...</span><br></pre></td></tr></table></figure></p>
<ol>
<li><p>æˆå‘˜å˜é‡<code>_bolts</code>åŒ…å«äº†æ‰€æœ‰çš„Boltå¯¹è±¡ï¼Œ<code>_spouts</code>åŒ…å«äº†æ‰€æœ‰çš„spoutå¯¹è±¡ï¼Œå®ƒä»¬çš„ç±»å‹åˆ†åˆ«æ˜¯IRichBoltå’ŒIRichSpoutç±»å‹ï¼Œå…³äºç»„ä»¶çš„æ¥å£ä¸‹æ–‡ä¼šæ…¢æ…¢ä»‹ç»ã€‚</p>
<ol>
<li><p>spoutçš„thriftåº•å±‚ç»“æ„ä¸ºSpoutSpecï¼ŒåŒ…å«äº†ä¸¤ä¸ªæˆå‘˜ï¼Œä¸€ä¸ªæ˜¯å®ç°æ¶ˆæ¯ç”Ÿäº§è€…å…·ä½“é€»è¾‘çš„spout_objectå¯¹è±¡ï¼Œå¦ä¸€ä¸ªæ˜¯ç”¨æ¥æè¿°å…¶è¾“å…¥è¾“å‡ºçš„commonå¯¹è±¡ï¼Œå…·ä½“å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">struct SpoutSpec&#123;</span><br><span class="line">    1: required ComponentObject spout_object;</span><br><span class="line">    2: required ComponentCommon common;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>boltçš„thriftåº•å±‚ç»“æ„ä¸ºBoltï¼Œç»“æ„ä¸SpoutSpecæ˜¯ä¸€è‡´çš„ï¼Œè¿™é‡Œä¸å†é˜è¿°ã€‚</p>
</li>
</ol>
</li>
<li><p><code>_commons</code>åŒ…å«äº†æ‰€æœ‰çš„Boltå’ŒSpoutå¯¹è±¡ï¼Œå®ƒåœ¨Thriftä¸­çš„æ•°æ®ç»“æ„æ˜¯ComponentCommon:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">struct ComponentCommon&#123;</span><br><span class="line">    1: required map&lt;GlobalStreamId, Grouping&gt; inputs;</span><br><span class="line">    2: required map&lt;string, StreamInfo&gt; streams;</span><br><span class="line">    3: optimal i32 parallelism_hint;</span><br><span class="line">    4: optimal string json_conf;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li><p>ComponentCommonæ˜¯ç”¨æ¥è¡¨ç¤ºTopologyçš„åŸºç¡€ç»„ä»¶å¯¹è±¡,<code>inputs</code>è¡¨ç¤ºè¯¥ç»„ä»¶å°†ä»å“ªäº›GlobalStreamIdä»¥ä½•ç§æ–¹å¼æ¥æ”¶æ•°æ®ï¼Œå…¶ä¸­GlobalStreamIdæ˜¯æŸä¸ªç»„ä»¶ä¸Šå®šä¹‰çš„ä¸€æ¡æµï¼Œæ•°æ®ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">struct GlobalStreamId&#123;</span><br><span class="line">    1: required string componentId;</span><br><span class="line">    2: required string streamId;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>GlobalStreamIdæœ‰ä¸¤ä¸ªåŸŸï¼ŒcomponentIdè¡¨ç¤ºè¯¥æµå±äºå“ªä¸€ä¸ªç»„ä»¶ï¼ŒstreamIdæ˜¯æµçš„æ ‡è¯†ã€‚ä¸åŒç»„ä»¶ä¹‹é—´å¯ä»¥ä½¿ç”¨ç›¸åŒçš„streamIdã€‚åˆ†ç»„æ–¹å¼Groupingå†³å®šäº†ç»„ä»¶æ‰€å‘é€çš„æ¶ˆæ¯å°†ä»¥ä½•ç§æ–¹å¼å‘é€åˆ°æ¥æ”¶ç«¯,Groupingè¢«å®šä¹‰ä¸ºunionç±»å‹ï¼Œå³è¡¨ç¤ºèŠ‚ç‚¹ä¹‹é—´åªèƒ½é‡‡å–ä¸€ç§åˆ†ç»„æ–¹å¼ï¼Œå…¶ç»“æ„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">union Grouping&#123;</span><br><span class="line">    1: list&lt;string&gt; fields //è‹¥ä¸ºç©ºï¼Œåˆ™é‡‡å–global groupingçš„åˆ†ç»„æ–¹å¼;</span><br><span class="line">    2: NullStruct shuffle; //éšæœºåˆ†ç»„</span><br><span class="line">    3: NullStruct all; //å…¨åˆ†ç»„ï¼Œå³å¹¿æ’­</span><br><span class="line">    4: NullStruct none; //æ— åˆ†ç»„ï¼Œå…¨éƒ¨å‘é€åˆ°åŒä¸€ä¸ªä»»åŠ¡å®ä¾‹ä¸Š</span><br><span class="line">    5: NullStruct direct; //ç›´æ¥åˆ†ç»„ï¼Œç›´æ¥å‘é€åˆ°æŒ‡å®šçš„ä»»åŠ¡å®ä¾‹ä¸Š</span><br><span class="line">    6: JavaObject custom_object;</span><br><span class="line">    7: binary custom_serialized;</span><br><span class="line">    8: NullStruct local_or_shuffle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ComponentCommonä¸­çš„<code>streams</code>æŒ‡å®šäº†è¯¥ç»„ä»¶éœ€è¦è¾“å‡ºçš„æµï¼Œå®ƒç»™å®šäº†streamIdä»¥åŠStreamInfoã€‚StreamInfoä¸­å®šä¹‰äº†è¾“å‡ºæµçš„å­—æ®µååˆ—è¡¨ä»¥åŠè¯¥æµçš„æ¶ˆæ¯åˆ†ç»„æ˜¯å¦æ˜¯ç›´æ¥åˆ†ç»„æ–¹å¼ï¼Œå…¶ç»“æ„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">struct StreamInfo&#123;</span><br><span class="line">    1: required list&lt;string&gt; output_fields;</span><br><span class="line">    2: required bool direct;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ComponentCommonä¸­çš„<code>parallelism_hint</code>è¡¨ç¤ºç»„ä»¶çš„å¹¶è¡Œåº¦ï¼Œå³æœ‰å¤šå°‘ä¸ªçº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹å¯åˆ†å¸ƒåœ¨ä¸åŒçš„è¿›ç¨‹ç©ºé—´æˆ–è€…æœºå™¨ä¸­ï¼Œé»˜è®¤å€¼æ˜¯ï¼‘ã€‚</p>
</li>
<li>ComponentCommonä¸­çš„<code>json_conf</code>ä¿å­˜äº†ä¸è¯¥ç»„ä»¶ç›¸å…³çš„ä¸€äº›è®¾ç½®ã€‚</li>
</ol>
</li>
<li><p>ç¬¬29~46è¡Œå®šä¹‰äº†<code>setBolt()</code>æ–¹æ³•ä»¥åŠå…¶é‡è½½ã€‚è¯¥æ–¹æ³•ä¸»è¦åŠŸèƒ½æ˜¯å®šä¹‰topologyä¸­çš„boltå¯¹è±¡ï¼Œå¹¶æŒ‡å®šå…¶å¹¶è¡Œåº¦ã€‚è¯¥æ–¹æ³•åœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­é¦–å…ˆä¼šé€šè¿‡æ–¹æ³•<code>validateUnusedId()</code>æ£€æµ‹è¾“å…¥çš„ç»„ä»¶IDæ˜¯å¦æ˜¯å”¯ä¸€çš„ï¼Œå…¶æ¬¡è°ƒç”¨<code>initCommon()</code>æ–¹æ³•ä¸ºè¯¥ç»„ä»¶æ„å»ºä¸€ä¸ªComponentCommonå¯¹è±¡ï¼Œå¹¶ä¸”åªåˆå§‹åŒ–å…¶å¹¶è¡Œåº¦å’Œé…ç½®ä¿¡æ¯ï¼Œé…ç½®ä¿¡æ¯è¢«åºåˆ—åŒ–æˆJSONçš„å½¢å¼ã€‚<code>setBolt()</code>æœ€åä¼šè¿”å›ä¸€ä¸ª<code>BoltGetter</code>å¯¹è±¡ï¼Œå°†åˆ©ç”¨å…¶ä¸ºboltå¯¹è±¡æ·»åŠ è¾“å…¥æµä¿¡æ¯ã€‚å…³äºè¿™ä¸ªå¯¹è±¡åæ–‡å†å…·ä½“ä»‹ç»ã€‚</p>
</li>
<li>ç¬¬50~59è¡Œå®šä¹‰äº†<code>setSpout()</code>æ–¹æ³•ä»¥åŠå…¶é‡è½½ã€‚è¯¥æ–¹æ³•ç±»ä¼¼äº<code>setBolt()</code>æ–¹æ³•ï¼Œä¹Ÿä¼šäº§ç”ŸComponentCommonå¯¹è±¡ã€‚</li>
<li>ç¬¬63~73è¡Œå®šä¹‰äº†<code>validateUnusedId()</code>æ–¹æ³•ï¼Œç”¨äºæ£€æµ‹è¾“å…¥çš„ç»„ä»¶Idæ˜¯å¦æ˜¯å”¯ä¸€çš„ï¼Œè‹¥ä¸æ˜¯åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li>ç¬¬75~81è¡Œå®šä¹‰äº†<code>getComponentCommon()</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ˜¯åœ¨<code>createTopology()</code>åˆ›å»ºæ‹“æ‰‘çš„æ—¶å€™è¢«è°ƒç”¨çš„ï¼Œè®¾ç½®äº†ç»„ä»¶çš„è¾“å‡ºæµä¿¡æ¯ã€‚</li>
<li>ç¬¬83~96è¡Œå®šä¹‰äº†<code>initCommon()</code>æ–¹æ³•ï¼Œä¸»è¦æ˜¯å¯¹ComponentCommonå¯¹è±¡è¿›è¡Œåˆå§‹åŒ–ï¼Œè®¾ç½®å¹¶è¡Œåº¦å’Œé…ç½®ä¿¡æ¯ã€‚</li>
<li>æœ€åä¸€ä¸ªä¹Ÿæ˜¯æœ€ä¸ºé‡è¦çš„ï¼Œç¬¬8~27è¡Œå®šä¹‰äº†<code>createTopology()</code>æ–¹æ³•ï¼Œæ ¹æ®è¾“å…¥çš„Boltå’ŒSpoutå¯¹è±¡åˆ›å»ºTopologyå¯¹è±¡ã€‚ä»ç¬¬16è¡Œå’Œç¬¬21è¡Œå¯ä»¥çœ‹å‡ºï¼Œåœ¨åˆ›å»ºæ‹“æ‰‘çš„è¿‡ç¨‹ä¸­ï¼ŒBoltå’ŒSpoutå‡ä¸ºå¯¹è±¡åºåˆ—åŒ–åå¾—åˆ°çš„å­—èŠ‚æ•°ç»„ã€‚</li>
</ol></p>
            <p class="article-more-link">
               <a href="/2016/07/16/storm component/#more">Read More</a>
				
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Storm/">Storm</a>
    </div>

            </p>
        
        </div>
		
    </div>
    
</article>





    <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/page/4/">&laquo; Prev</a><a class="page-number" href="/home.html">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span>
    </nav>
</section>
			
			
			
        </div>

			<div style="height:10px;pistion:absolute;bottom:0"></div>
<footer id="footer" >
    <div class="outer">
		<div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        <div id="footer-info" class="inner">
            &copy; 2017 <i class="fa fa-heart blink-slow"></i> Tankcat<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
		
    </div>
</footer>
			
    
<div id="container"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>

<script>

var gitment = new Gitment({
  id: '',
  owner: 'tankcat',
  repo: 'tankcat.github.io',
  oauth: {
    client_id: '60fb85b01453b027d1f5',
    client_secret: '4d0e75031ae53e76418d288b34897a8718481fd2',
  },
})
gitment.render('comments')
</script>



    
        <script src="/vendor/lightgallery/js/lightgallery.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-pager.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-hash.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-share.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-video.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

	
    </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>

</html>