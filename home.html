<!DOCTYPE html><html lang="en"><head><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><meta charset="utf-8"><title>Tankcat</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="shortcut icon" href="/css/images/favicon.ico"><link rel="stylesheet" href="/vendor/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/vendor/open-sans/styles.css"><link rel="stylesheet" href="/vendor/source-code-pro/styles.css"><link rel="stylesheet" href="/css/comment.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/tagclouds.css"><link rel="stylesheet" href="/css/font-awesome.css"><script src="/vendor/jquery/2.1.3/jquery.min.js"></script><link rel="stylesheet" href="/vendor/lightgallery/css/lightgallery.min.css"><script src="//cdn.bootcss.com/jquery/2.1.0/jquery.min.js" type="text/javascript"></script><script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script><script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script><script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></head><body><div id="containerr"><header id="header" style="padding-top:15px"><div id="header-main" class="header-inner"><div class="outer"><a href="/" id="logo"><i class="logo"></i></a><nav id="main-nav"> <a class="main-nav-link" href="/index.html">Home</a> <a class="main-nav-link" href="/archives">Archive</a> <a class="main-nav-link" href="/categories">Category</a> <a class="main-nav-link" href="/tags">Tag</a> <a class="main-nav-link" href="/about">About</a> <a class="main-nav-link" href="/favorite">Photos</a></nav></div></div><div id="main-nav-mobile" class="header-sub header-inner"><table class="menu outer"><tr><td><a class="main-nav-link" href="/index.html">Home</a></td><td><a class="main-nav-link" href="/archives">Archive</a></td><td><a class="main-nav-link" href="/categories">Category</a></td><td><a class="main-nav-link" href="/tags">Tag</a></td><td><a class="main-nav-link" href="/about">About</a></td><td><a class="main-nav-link" href="/favorite">Photos</a></td><td><div class="search-form"> <input type="text" class="ins-search-input search-form-input" placeholder="Search"></div></td></tr></table></div></header><div class="outer"><aside id="profile"><div class="profile-inner"></div></aside><section id="main"><article id="post-daemon fault tolerance" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner" style="border-radius:1.5px;box-shadow:10px 10px 5px #ccc"> <a href="/2018/01/17/daemon fault tolerance/" itemprop="url"><img src="http://7xwggp.com1.z0.glb.clouddn.com/storm-topo.png" class="article-banner"></a><header class="article-header"><center><h1 itemprop="name"> <a class="article-title" href="/2018/01/17/daemon fault tolerance/">守护进程的容错机制</a></h1><div class="article-meta"><div class="article-date"> <a href="/2018/01/17/daemon fault tolerance/"><time datetime="2018-01-17T06:10:00.000Z" itemprop="datePublished">2018-01-17</time></a></div></div></center></header><div class="article-entry" itemprop="articleBody"><p></p><p>Storm有三种不同的守护进程<a href="守护进程是指一类后台运行的特殊进程，不受用户的直接控制，用于执行特殊的系统任务，在系统引导的时候启动，一直运行到系统关闭。">^daemon</a></p><ul><li>Nimbus，负责调度worker；</li><li>Supervisor，负责启动与终止worker；</li><li>Log Viewer，提供日志的访问；</li><li>UI，提供集群的运行状态。</li></ul><h2 id="1-当worker意外终止时会发生什么？"><a href="#1-当worker意外终止时会发生什么？" class="headerlink" title="1. 当worker意外终止时会发生什么？"></a>1. 当worker意外终止时会发生什么？</h2><p>当一个worker意外终止时，Supervisor会对它进行重启。该worker如果在重启过程中仍然一直失败，并且无法向Nimbus发送心跳信息，则Nimbus会重新调度该worker(安排到其他物理节点上运行)。</p><h2 id="2-当物理节点出现故障时会发生什么？"><a href="#2-当物理节点出现故障时会发生什么？" class="headerlink" title="2. 当物理节点出现故障时会发生什么？"></a>2. 当物理节点出现故障时会发生什么？</h2><p>这里的物理节点指代Storm集群中的工作服务器，而非Nimbus所在的服务器。当一个物理节点意外宕机，在该节点上运行的所有task都将超时；Nimbus检测到这些超时的task之后会把它们重新调度到其他服务器上去运行。</p><h2 id="3-当Nimbus或者Supervisor意外终止时会发生什么？"><a href="#3-当Nimbus或者Supervisor意外终止时会发生什么？" class="headerlink" title="3. 当Nimbus或者Supervisor意外终止时会发生什么？"></a>3. 当Nimbus或者Supervisor意外终止时会发生什么？</h2><p>Nimbus和Supervisor都是快速失败的(即无论何时遇到突发状况都会进入自毁模式)、无状态的(其所有状态都保存在磁盘或者Zookeeper上)。系统中必须使用后台监控工具来监测Nimbus和Supervisor的运行。因此，若Nimbus或者Supervisor意外终止了，它们会自行重启。</p><p>需要注意的是，即使Nimbus或者Supervisor意外终止了，也不会影响worker的继续运行。这与Hadoop形成鲜明对比(JobTracker如果意外终止，则会丢失所有运行中的job)。</p><h2 id="4-Nimbus是否是SPOF？"><a href="#4-Nimbus是否是SPOF？" class="headerlink" title="4. Nimbus是否是SPOF？"></a>4. Nimbus是否是SPOF？</h2><p>即使Nimbus所在的节点出现故障无法访问，worker进程依旧能继续运行；Supervisor也会继续运行，并重启失效的worker。但是，没有Nimbus的调度与协调，worker进程不能被重新指派到其他节点服务器。比如如果一个节点服务器失效，在该节点上运行的所有worker就会丢失，无法被重新调度。因此，Nimbus确实有些类似SPOF<a href="Single-point-of-failure，即单点故障，是系统的一个组件，如果该组件失效或者停止运转，将会导致整个系统不能继续工作。">^spof</a>。</p><p>不过，Storm 1.0.0开始之后的版本已经实现了<a href="https://github.com/tankcat/storm-documents/blob/master/Intermediate/high%20available%20nimbus.md" target="_blank" rel="noopener">Nimbus的高可用设计</a>。</p><p></p><p class="article-more-link"> <a href="/2018/01/17/daemon fault tolerance/#more">Read More</a></p><div class="article-tag"><i class="fa fa-tag"></i> <a class="tag-link" href="/tags/Fault-Tolerance/">Fault Tolerance</a>, <a class="tag-link" href="/tags/Storm/">Storm</a></div><p></p></div></div></article><article id="post-message processing guarantees" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner" style="border-radius:1.5px;box-shadow:10px 10px 5px #ccc"> <a href="/2018/01/17/message processing guarantees/" itemprop="url"><img src="http://7xwggp.com1.z0.glb.clouddn.com/storm-topo.png" class="article-banner"></a><header class="article-header"><center><h1 itemprop="name"> <a class="article-title" href="/2018/01/17/message processing guarantees/">消息的可靠传输保证</a></h1><div class="article-meta"><div class="article-date"> <a href="/2018/01/17/message processing guarantees/"><time datetime="2018-01-17T06:10:00.000Z" itemprop="datePublished">2018-01-17</time></a></div></div></center></header><div class="article-entry" itemprop="articleBody"><p></p><p>Storm提供了不同级别的消息可靠传输保证，包括best-effort、at-least-once以及exactly-once(通过Trident实现)。</p><h2 id="1-消息的完整性处理"><a href="#1-消息的完整性处理" class="headerlink" title="1. 消息的完整性处理"></a>1. 消息的完整性处理</h2><p>一个从spout中发出的tuple (后文均简称为spout tuple) 可以产生成千上万个基于它而创建的tuples。考虑下面这个单词统计的拓扑。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">TopologyBuilder builder = <span class="keyword">new</span> TopologyBuilder();</span><br><span class="line">builder.setSpout(<span class="string">"sentences"</span>, <span class="keyword">new</span> KestrelSpout(<span class="string">"kestrel.backtype.com"</span>,</span><br><span class="line">                                               <span class="number">22133</span>,</span><br><span class="line">                                               <span class="string">"sentence_queue"</span>,</span><br><span class="line">                                               <span class="keyword">new</span> StringScheme()));</span><br><span class="line">builder.setBolt(<span class="string">"split"</span>, <span class="keyword">new</span> SplitSentence(), <span class="number">10</span>)</span><br><span class="line">        .shuffleGrouping(<span class="string">"sentences"</span>);</span><br><span class="line">builder.setBolt(<span class="string">"count"</span>, <span class="keyword">new</span> WordCount(), <span class="number">20</span>)</span><br><span class="line">        .fieldsGrouping(<span class="string">"split"</span>, <span class="keyword">new</span> Fields(<span class="string">"word"</span>));</span><br></pre></td></tr></table></figure><p>这个拓扑从一个Kestrel<a href="Kestrel是一个用scala写的、Twitter开源的消息中间件，特点是高性能、小巧、持久存储且支持可靠获取。">^kestrel</a>队列中读取句子，将句子划分成连续的单词，接着发送每个单词的统计次数。spout tuple(句子)会产生很多基于它而创建的新tuples，包括句子中的单词和单词的统计次数。这些tuple构成了如下所示的消息树tuple tree。</p><p>如果这个消息树发送完成，且树中的每一个tuple都得到了正确处理，则认为spout tuple得到了”完整性处理“；如果在指定的超时时间内这个消息树没有被完全处理，则认为spout tuple处理失败了。这个超时时间可以通过在构造拓扑时配置参数<a href="http://storm.apache.org/releases/1.1.1/javadocs/org/apache/storm/Config.html#TOPOLOGY_MESSAGE_TIMEOUT_SECS" target="_blank" rel="noopener">Config.TOPOLOGY_MESSAGE_TIMEOUT_SECS</a>来设定，默认值为30秒。</p><p><img src="http://storm.apache.org/releases/1.1.1/images/tuple_tree.png" alt=""></p><h2 id="2-消息处理完整或者处理失败后会发生什么"><a href="#2-消息处理完整或者处理失败后会发生什么" class="headerlink" title="2. 消息处理完整或者处理失败后会发生什么"></a>2. 消息处理完整或者处理失败后会发生什么</h2><p>为了充分理解这个问题，需要首先了解一下spout tuple的生命周期，下面以接口ISpout作为参考。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ISpout</span> <span class="keyword">extends</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">open</span><span class="params">(Map conf, TopologyContext context, SpoutOutputCollector collector)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">close</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">nextTuple</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">ack</span><span class="params">(Object msgId)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">fail</span><span class="params">(Object msgId)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>首先，通过调用<code>nextTuple()</code>，Storm向<code>Spout</code>请求一个tuple。<code>Spout</code>利用<code>open()</code>中提供的<code>SpoutOutputCollector</code>向它的输出流中发送一个tuple。在发送tuple时，Storm会给每个tuple提供一个_消息id_，用于后续识别tuple。举个例子，<code>KestrelSpout</code>从kestrel队列中读取一条消息，然后再发送一个携带有由Kestrel提供的_消息id_的tuple。一般使用<code>SpoutOutputCollector</code>发送消息的形式如下。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_collector.emit(<span class="keyword">new</span> Values(<span class="string">"field1"</span>, <span class="string">"field2"</span>, <span class="number">3</span>) , msgId);</span><br></pre></td></tr></table></figure><p>接着，spout tuple被发送到消费者bolt，与此同时，Storm会追踪所创建的消息树。如果检测到一个tuple得到了完整性处理，Storm根据<code>Spout</code>任务提供的_消息id_调用最初发送该tuple的<code>Spout</code>任务的<code>ack()</code>。需要注意的是，对于一个特定的tuple，其完整性处理的ack与失败处理fail都只会由最初发送它的<code>Spout</code>任务来执行。换言之，Storm集群中可能有多个关于某个<code>Spout</code>的任务，发送该tuple的<code>Spout</code>任务以外的其他任务都不能对其进行ack或者fail。</p><p>我们再以<code>KestrelSpout</code>为例继续分析<code>Spout</code>在保证消息的可靠传输过程中做了什么。当<code>KestrelSpout</code>从kestrel队列中读取一条消息时，它”打开“了这条消息，意味着消息并没有真正从队列中删除(pop)，只是被设置成”挂起“的状态，直到接收消息得到完整性处理的信号。处于”挂起“状态的消息也不会被发送给其他<code>Spout</code>。此外，如果<code>Spout</code>断开了和队列的连接，则所有处于”挂起“状态的消息都会被重新放回到队列中。当消息被”打开“时，Kestrel会给<code>Spout</code>同时提供消息体数据和该消息的唯一id。<code>KestrelSpout</code>在利用<code>SpoutOutputCollector</code>发送tuple时会把这个唯一id作为tuple的_消息id_。一段时间之后，<code>KestrelSpout</code>的<code>ack()</code>被调用，这时<code>KestrelSpout</code>会通过_消息id_向Kestrel请求将对应的消息从队列中移除；或者<code>fail()</code>被调用，则将消息重新放回队列。</p><p></p><p class="article-more-link"> <a href="/2018/01/17/message processing guarantees/#more">Read More</a></p><div class="article-tag"><i class="fa fa-tag"></i> <a class="tag-link" href="/tags/Reliable-Message-Processing/">Reliable Message Processing</a>, <a class="tag-link" href="/tags/Storm/">Storm</a></div><p></p></div></div></article><article id="post-todo2018" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner" style="border-radius:1.5px;box-shadow:10px 10px 5px #ccc"> <a href="/2018/01/02/todo2018/" itemprop="url"><img src="http://7xwggp.com1.z0.glb.clouddn.com/todolist.jpeg" class="article-banner"></a><header class="article-header"><center><h1 itemprop="name"> <a class="article-title" href="/2018/01/02/todo2018/">2018新年计划</a></h1><div class="article-meta"><div class="article-date"> <a href="/2018/01/02/todo2018/"><time datetime="2018-01-02T07:16:00.000Z" itemprop="datePublished">2018-01-02</time></a></div></div></center></header><div class="article-entry" itemprop="articleBody"><br><blockquote style="font-size:120%;line-height:1.5em;color:#083a4e"> 今年所有的目标和计划，归根结底就一个，那就是做一个没有拖!延!症!的!人!</blockquote><p>一路向前，永不回头，一切B数自在人心！</p><ul><li><p>[ ] 发表一篇survey</p></li><li><p>[ ] 考托福</p></li><li><p>[ ] 学完Stanford的Algorithm Specialization</p></li><li><p>[ ] 体重减到95斤，体脂降低到22%</p></li><li><p>[ ] 和对象一起旅游一次</p></li><li><p>[ ] 读完Distributed System concepts and design</p></li><li><p>[ ] 坚持日程记录与饮食健身打卡</p></li><li><p>[ ] 买索尼黑卡</p></li><li><p>[ ] 体重减到95斤，体脂降低到22%</p></li><li><p>[ ] 20部豆瓣高分电影</p></li><li><p>[ ] 看完以下书单</p><pre><code>1. Priest所有文

   - [x] 有匪1
   - [x] 有匪2
   - [x] 有匪3
   - [x] 有匪4
   - [ ] 杀破狼
   - [ ] 大哥
   - [ ] 脱轨1
   - [ ] 脱轨2
   - [ ] 山河表里
   - [ ] 天涯客1
   - [ ] 天涯客2
   - [ ] 大英雄时代

2. 金庸的射雕三部曲

   - [ ] 射雕英雄传
   - [ ] 神雕侠侣
   - [ ] 倚天屠龙记

3. 埃莱娜·费兰特的那不勒斯四部曲

   - [ ] 我的天才女友
   - [ ] 新名字的故事
   - [ ] 离开的，留下的
   - [ ] 失踪的孩子

4. 马伯庸的口碑佳作

   - [ ] 长安十二时辰1
   - [ ] 长安十二时辰2
   - [ ] 风起陇西

   ​
</code></pre></li></ul><br><div class="copyright"><p><span>Title:</span><a href="/2018/01/02/todo2018/">2018新年计划</a></p><p><span>Author:</span><a href="/" title="visit Tankcat 's personal blog">Tankcat</a></p><p><span>Release Date:</span>2018-01-02 15:16</p><p><span>Update Date:</span>2018-01-17 14:17</p><p> <span>Original Link:</span><a href="/2018/01/02/todo2018/" title="2018新年计划">http://tankcat2.com/2018/01/02/todo2018/</a><span class="btn" data-clipboard-text="Master Copy: http://tankcat2.com/2018/01/02/todo2018/　　Author: Tankcat" title="copy the article link"><i class="fa fa-clipboard"></i></span></p><p><span>License Agreement:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" title="Mainland China (CC BY-NC-SA 3.0 CN)">"Signature-Non Commercial-Share Alike 3.0"</a>.<br><br> <span>Please retain the original link and author if reprinting.</span></p><script src="/js/clipboard.min.js"></script><script>var clipboard=new Clipboard(".btn")</script></div><style type="text/css">.copyright p .btn{margin-left:1em}.copyright:hover p .btn::after{content:"Copy"}.copyright p .btn:hover{color:gray;cursor:pointer}</style><br><br><style type="text/css">.center{text-align:center}.hidden{display:none}.donate_bar a.btn_donate{display:inline-block;width:82px;height:82px;background:url(http://7xsl28.com1.z0.glb.clouddn.com/btn_reward.gif) no-repeat;-webkit-transition:background 0s;-moz-transition:background 0s;-o-transition:background 0s;-ms-transition:background 0s;transition:background 0s}.donate_bar a.btn_donate:hover{background-position:0 -82px}.donate_bar .donate_txt{display:block;color:#9d9d9d;font:14px/2 "Microsoft Yahei"}.bold{font-weight:700}</style><div id="donate_module"><div id="donate_board" class="donate_bar center"> 打赏 | Buy me a coffee<br><br><a id="btn_donate" class="btn_donate" target="_self" href="javascript:;" title="Donate 打赏" onclick='var qr=document.getElementById("QR");"none"===qr.style.display?qr.style.display="block":qr.style.display="none"'></a></div><div id="QR" style="display:none"><br><br> <a href="http://7xwggp.com1.z0.glb.clouddn.com/wechatdonate.jpg" title="用微信扫一扫哦~" class="fancybox" rel="article0"><img src="http://7xwggp.com1.z0.glb.clouddn.com/wechatdonate.jpg" title="微信打赏 Colin" height="250px" width="250px"></a><br><center> <span class="donate_txt">If you enjoy the blog, please feel free to donate~Thx for your support.</span></center></div><br></div></div></div></article><article id="post-Course1-VI" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner" style="border-radius:1.5px;box-shadow:10px 10px 5px #ccc"> <a href="/2017/12/24/Course1-VI/" itemprop="url"><img src="http://7xwggp.com1.z0.glb.clouddn.com/quicksort_analysis.jpg" class="article-banner"></a><header class="article-header"><center><h1 itemprop="name"> <a class="article-title" href="/2017/12/24/Course1-VI/">Algorithm Specialization I-VI QuickSort Algorithm Analysis</a></h1><div class="article-meta"><div class="article-date"> <a href="/2017/12/24/Course1-VI/"><time datetime="2017-12-24T03:20:00.000Z" itemprop="datePublished">2017-12-24</time></a></div></div></center></header><div class="article-entry" itemprop="articleBody"><p></p><p>这一章节的课程是证明随机选择pivot的快速排序算法的其平均运行时间是$O(nlogn)$，证明过程如同算法本身是巧妙的，基于一个在随机算法分析中很有用的“分解原理”。</p><p>首先定义：</p><ol><li>输入数组A的长度为n</li><li>样本空间$\Omega=$快排中所有可能的随机选择，即<strong>一组pivot序列</strong></li><li>随机变量$C(\delta)=$对于一组pivot序列$\delta$，元素比较的总次数</li></ol><p>有一个重要的结论是，快排的运行时间取决于元素比较的次数。可以证明的是，存在一个常数c，对于所有可能的pivot序列，有$RT(\delta)\leq c\cdot C(\delta)$。因此接下来的目标就是证明$E(C)=O(nlogn)$。如果想先通过递归关系理论来探讨$C(\delta)$是比较困难负责的，因此可以利用<strong>分解原理</strong>，将复杂的$C_(\delta)$分解成若干个简单的随机变量之和。</p><p>接下来定义基础构建：这里不能利用Master method，因为在快排中子问题的大小是随机变化的。定义$z_i$是输入数组A中第i小的元素。对于$\delta\in\Omega$，当$i&lt;j$时，定义$X_{ij}=$第i小的元素与第j小的元素的比较次数。根据快排的ChoosePivot子程序中的Partition操作可知，元素的比较操作只会存在于pivot和其他元素之间，的=只有当$z_i和z_j$中有一个是pivot时，比较次数为1，其他情况都为0。因此有$C(\delta)=\sum_{i=1}^{n-1}\sum_{j=i+1}^{n}X_{ij}(\delta)$。接着利用线性期望，可得$E(C)=\sum_{i=1}^{n-1}\sum_{j=i+1}^{n}E(X_{ij})$，其中$E(X_{ij})=0\cdot P(X_{ij}=0)+1\cdot P(X_{ij}=1)$，则$E(C)=\sum_{i=1}^{n-1}\sum_{j=i+1}^{n}P(X_{ij}=1)$。</p><p>下面是求$P(X_{ij}=1)$，即给定pivot序列，则输入数组中第i小与第j小的元素被比较的概率。对于$z_i,z_j$且$i&lt;j$，它们之间还存在其他元素，即有$z_i,z_{i+1},…,z_{j-1},z_{j}$，有一个结论是，如果选择的pivot是$z_i$或者$z_j$，则它们会被比较；反之，如果选择的pivot是$z_i$和$z_j$之间的元素，则它们不会被比较，因为它们会被pivot左右两边各自的递归继续调用。因此，而每个元素被选中为pivot的概率都是$\frac{1}{j-i+1}$，因此$P(X_{ij}=1)=\frac{2}{j-i+1}$。因此$E(C)=\sum_{i=1}^{n-1}\sum_{j=1}^{n}\frac{2}{j-i+1}$。</p><p>最后问题就归结为证明$\sum_{i=1}^{n-1}\sum_{j=1}^{n}\frac{2}{j-i+1}=O(nlogn)$。先分析$\sum_{j=1}^{n}\frac{2}{j-i+1}=\frac{1}{2}+\frac{1}{3}+…=\sum_{k=2}^n\frac{1}{k}$，根据下图可知，$\sum_{k=2}^n\frac{1}{k}\leq\int_{1}^n\frac{1}{x}dx=lnx|_{1}^n=ln$。因此，$E(C)\leq 2\cdot n\cdot ln n$。</p><p></p><p class="article-more-link"> <a href="/2017/12/24/Course1-VI/#more">Read More</a></p><div class="article-tag"><i class="fa fa-tag"></i> <a class="tag-link" href="/tags/Algorithm-Specialization/">Algorithm Specialization</a>, <a class="tag-link" href="/tags/Course-I/">Course I</a></div><p></p></div></div></article><article id="post-diary1223" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner" style="border-radius:1.5px;box-shadow:10px 10px 5px #ccc"> <a href="/2017/12/23/diary1223/" itemprop="url"><img src="http://7xwggp.com1.z0.glb.clouddn.com/shuishan.jpg" class="article-banner"></a><header class="article-header"><center><h1 itemprop="name"> <a class="article-title" href="/2017/12/23/diary1223/">十二月的第四周</a></h1><div class="article-meta"><div class="article-date"> <a href="/2017/12/23/diary1223/"><time datetime="2017-12-23T02:30:00.000Z" itemprop="datePublished">2017-12-23</time></a></div></div></center></header><div class="article-entry" itemprop="articleBody"><p></p><p>上周周末去了对象老家，回到上海的时候已经是晚上七八点了。从黄桥坐车到南京，在换成高铁回上海，几乎是坐了一下午的车，很累，索性就略过了上周的周记。</p><h3 id="工作日的日常"><a href="#工作日的日常" class="headerlink" title="工作日的日常"></a>工作日的日常</h3><p>周一上午9点半和振杰老师、Tom电话会议，讲了一下survey的进展。还是老样子，很多概念我还是糊里糊涂的，没讲明白，所以本周的工作除了修改demo论文之外就是继续把之前没读懂的paper再翻出来仔细看看。上周遗留的不少Algorithm Specialization的课程，周一周二花时间补上了。现在已经能做到跟得上英文字幕就能看懂在讲什么，暂停的次数也渐渐减少。总结了一点，看视频的时候不用急着把知识点立刻完完整整地记录下来，可以直接拿张草稿纸，记录一些关键词就可以，等整个视频学习完后再对照slide、或者根据字幕定位到没看懂的视频部分来整理最终的笔记，这样效率会更高一点。本周的课程学习得差不多了，提前把作业写完，这次编码作业是写快排并统计compare次数，第一次真正理解了快排的思想，没有借助任何网上别人写好的代码。由于到了订阅的免费体验截至日期，不续费后面的课程只能看视频，不能获取作业，考虑到作业本身是对学习的巩固，我还是咬咬牙续费了。还真不便宜，一个月40多刀。或者这能push我每周加快学习的进度吧。关于Demo论文的修改，周五的版本算是差不多接近终稿了。提交的时候出现了一个乌龙，官方给定的demo track 提交链接登陆进去居然没有提交按钮，空荡荡的一个页面，发邮件问了chair，周五下午其中一个chair给了回复，说他刚旅行回来周末来看看这个问题=。。=看了chair邮箱的名称，原来也是个中国人，哎，又是两个中国人还英文交流。周六周日继续看paper和survey。</p><h3 id="实验室外的闲暇时光"><a href="#实验室外的闲暇时光" class="headerlink" title="实验室外的闲暇时光"></a>实验室外的闲暇时光</h3><p>上周就周一跑步了3公里，然后一直拖到这周周三，被减肥群里的妹子说得我很羞愧，于是傍晚时刻换上装备慢跑了4公里。之前收藏的一个瘦肚子5分钟干货视频，终于让它不再尘封。9组动作虽然各自只有30秒，其实还蛮累的，周三开始每天做两次，头两天腹部酸痛，不知道是不是心里效应，感觉肚子上的肉紧致了一些。上周周末在对象老家吃得比较嗨，所以本周头三天控制了一下，但是临近周末，抑制不住想吃美食的欲望，尤其是三文鱼刺身，周五晚上发现大悦城新开始了一家座头市居酒屋，于是下午五点就步行过去吃了。我到的时候店里没有顾客，点了三文鱼刺身、特色沙拉、串烤猪颈肉和猪骨汤拉面，总共100出头，量还是很足的，口味也不错。隔壁的星巴克也还开着，就去买了中杯半糖的太妃榛果。在出门之前缓存了一半《追龙》，可能是喝了咖啡，晚上12点多还不困，索性把追龙剩余部分继续看掉。王晶也不是总拍烂片嘛，这部港匪片还是可以的，只是跛豪的老婆孩子和兄弟们都接连为了他死去，有点于心不忍啊。</p><h3 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h3><p>这周就记录这些吧，写周日的习惯还是要继续保持，不能浑浑噩噩地过日子，总得用文字或者照片记录点什么，等老了回头翻看这些文字，说不定会心一笑呢。2017年就剩下最后一周了，2018年的第一天是我跟对象一周年纪念日，好期待他会怎么安排那一天呀。先提前给自己列几个新年新计划吧：2018年要每两周至少一本书，少去电影院看快餐电影，好好利用腾讯会员，多刷一点豆瓣高分；继续健身，体脂降低到21%，体重减到47.5kg。</p><p></p><p class="article-more-link"> <a href="/2017/12/23/diary1223/#more">Read More</a></p><div class="article-tag"><i class="fa fa-tag"></i> <a class="tag-link" href="/tags/周记/">周记</a>, <a class="tag-link" href="/tags/自省/">自省</a></div><p></p></div></div></article><nav id="page-nav"> <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a></nav></section></div><div style="height:10px;pistion:absolute;bottom:0"></div><footer id="footer"><div class="outer"><div id="search-form-wrap"><form class="search-form"> <input type="text" class="ins-search-input search-form-input" placeholder="Search"> <button type="submit" class="search-form-submit"></button></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"> <input type="text" class="ins-search-input" placeholder="Type something..."><span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script></div><div id="footer-info" class="inner"> &copy; 2018<i class="fa fa-heart blink-slow"></i> Tankcat<br> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a></div></div></footer><div id="container"></div><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script><script>var gitment=new Gitment({id:"",owner:"tankcat",repo:"tankcat.github.io",oauth:{client_id:"60fb85b01453b027d1f5",client_secret:"4d0e75031ae53e76418d288b34897a8718481fd2"}});gitment.render("comments")</script><script src="/vendor/lightgallery/js/lightgallery.min.js"></script><script src="/vendor/lightgallery/js/lg-thumbnail.min.js"></script><script src="/vendor/lightgallery/js/lg-pager.min.js"></script><script src="/vendor/lightgallery/js/lg-autoplay.min.js"></script><script src="/vendor/lightgallery/js/lg-fullscreen.min.js"></script><script src="/vendor/lightgallery/js/lg-zoom.min.js"></script><script src="/vendor/lightgallery/js/lg-hash.min.js"></script><script src="/vendor/lightgallery/js/lg-share.min.js"></script><script src="/vendor/lightgallery/js/lg-video.min.js"></script><script src="/js/main.js"></script></div><script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script><script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script></body></html>